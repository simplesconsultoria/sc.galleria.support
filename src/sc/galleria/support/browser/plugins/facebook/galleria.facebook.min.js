/*
 Galleria Facebook Plugin 2012-02-27
 Adapted from the included Galleria Flickr Plugin

 Copyright 2011, Aino
 Licensed under the MIT license.
*/
Galleria.requires(1.25,"The Facebook Plugin requires Galleria version 1.2.5 or later.");
(function(f){var j=Galleria.utils.getScriptPath();Galleria.Facebook=function(){this.options={max:30,imageSize:"source",thumbSize:"thumb",description:!1,complete:function(){},backlink:!1}};Galleria.Facebook.prototype={constructor:Galleria.Facebook,album:function(a,c){return this._find({album_id:a},c)},setOptions:function(a){f.extend(this.options,a);return this},_getBig:function(a){return a.images[0].source},_getSize:function(a,c){var b;switch(c){case "thumb":b=a.images[7].source;break;case "small":b=
a.images[6].source;break;case "big":b=this._getBig(a);break;case "original":b=a.source?a.source:this._getBig(a);break;default:b=a.url_z||a.url_m}return b},_call:function(a,c){var b=this;f.getJSON("http://graph.api.facebook.com/"+a.album_id+"/photos&callback=?&limit="+this.options.max,function(d){0<d.data.length?c.call(b,d):Galleria.raise("Unable to retrieve Facebook photos from album "+a.album_id)});return b},_find:function(a,c){return this._call(a,function(a){var d=[],a=a.data,f=Math.min(this.options.max,
a.length),e,g;for(g=0;g<f;g++)e=a[g],d.push({thumb:this._getSize(e,this.options.thumbSize),image:e[this.options.imageSize],big:this._getBig(e),title:e.name,description:this.options.description&&e.name?e.name:"",link:this.options.backlink?e.link:""});c.call(this,d)})}};var h=Galleria.prototype.load;Galleria.prototype.load=function(){if(arguments.length||"string"!==typeof this._options.facebook)h.apply(this,Galleria.utils.array(arguments));else{var a=this,c=Galleria.utils.array(arguments),b=this._options.facebook.split(":"),
d,i=f.extend({},a._options.facebookOptions),e="undefined"!==typeof i.loader?i.loader:f("<div>").css({width:48,height:48,opacity:0.7,background:"#000 url("+j+"loader.gif) no-repeat 50% 50%"});if(b.length){if("function"!==typeof Galleria.Facebook.prototype[b[0]])return Galleria.raise(b[0]+" method not found in Facebook plugin"),h.apply(this,c);if(!b[1])return Galleria.raise("No facebook argument found"),h.apply(this,c);window.setTimeout(function(){a.$("target").append(e)},100);d=new Galleria.Facebook;
"object"===typeof a._options.facebookOptions&&d.setOptions(a._options.facebookOptions);d[b[0]](b[1],function(b){a._data=b;e.remove();a.trigger(Galleria.DATA);d.options.complete.call(d,b)})}else h.apply(this,c)}}})(jQuery);